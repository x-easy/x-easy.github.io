<!DOCTYPE html>
<html lang="zh-Hant" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>x-easy 品牌資產引擎</title>
    <style>
        :root {
            --bg: #ffffff; --text: #1a1a1a; --card: #f9f9f9; --border: #eeeeee; --accent: #007AFF;
        }
        [data-theme="dark"] {
            --bg: #0a0a0a; --text: #f5f5f5; --card: #161616; --border: #222222; --accent: #0A84FF;
        }

        body { 
            font-family: -apple-system, BlinkMacSystemFont, sans-serif; 
            background: var(--bg); color: var(--text); 
            margin: 0; padding: 40px 20px 100px 20px; transition: 0.3s;
        }

        /* 頁首 */
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 40px; }
        h1 { font-weight: 300; letter-spacing: -1px; margin: 0; }

        /* 圖示網格 */
        .category-title { font-size: 11px; color: gray; text-transform: uppercase; letter-spacing: 2px; margin: 30px 0 15px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(110px, 1fr)); gap: 15px; }
        .card { 
            background: var(--card); border: 1px solid var(--border); 
            border-radius: 12px; padding: 25px 10px; text-align: center; 
            cursor: pointer; transition: 0.2s; 
        }
        .card:hover { border-color: var(--accent); transform: translateY(-3px); }
        svg { width: 28px; height: 28px; stroke: var(--text); stroke-width: 1.25; fill: none; }
        .label { font-size: 10px; opacity: 0.6; margin-top: 12px; font-family: monospace; }

        /* 底部導覽列 */
        .bottom-nav {
            position: fixed; bottom: 0; left: 0; right: 0;
            background: rgba(var(--bg), 0.8); backdrop-filter: blur(20px);
            border-top: 1px solid var(--border);
            display: flex; justify-content: space-around; padding: 15px 0 30px; z-index: 100;
        }
        .nav-item { text-align: center; cursor: pointer; color: var(--text); opacity: 0.7; font-size: 10px; transition: 0.2s; }
        .nav-item:hover { opacity: 1; }
        .nav-item svg { width: 22px; height: 22px; display: block; margin: 0 auto 5px; }

        /* 全螢幕彈窗 (Modal) */
        .modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg); z-index: 1000;
            display: none; flex-direction: column; padding: 40px 20px;
            box-sizing: border-box;
        }
        .modal.active { display: flex; animation: slideUp 0.3s ease-out; }
        @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }

        .modal-content { flex: 1; overflow-y: auto; text-align: center; }
        .modal-footer { display: flex; justify-content: center; gap: 20px; padding: 20px 0; }
        
        .btn-close { 
            padding: 12px 30px; border-radius: 30px; border: 1px solid var(--border);
            background: var(--card); color: var(--text); cursor: pointer;
        }

        /* 開關樣式 */
        .switch-row { display: flex; justify-content: space-between; align-items: center; padding: 20px; background: var(--card); border-radius: 10px; }
    </style>
</head>
<body>

    <div class="header">
        <h1>x-easy Engine</h1>
    </div>

    <div id="factory"></div>

    <nav class="bottom-nav">
        <div class="nav-item" onclick="location.reload()">
            <svg viewBox="0 0 24 24"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/></svg>
            主頁
        </div>
        <div class="nav-item" onclick="openModal('catModal')">
            <svg viewBox="0 0 24 24"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/></svg>
            類別
        </div>
        <div class="nav-item" onclick="openModal('qaModal')">
            <svg viewBox="0 0 24 24"><circle cx='12' cy='12' r='10'/><path d='M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3'/><line x1='12' y1='17' x2='12.01' y2='17'/></svg>
            Q&A
        </div>
        <div class="nav-item" onclick="openModal('setModal')">
            <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
            設定
        </div>
    </nav>

    <div id="setModal" class="modal">
        <div class="modal-content">
            <h2>系統設定</h2>
            <div class="switch-row">
                <span>暗模式切換 (Dark Mode)</span>
                <input type="checkbox" id="themeToggle" checked onchange="toggleTheme()">
            </div>
            <br>
            <button class="btn-close" style="background:var(--accent); color:white; border:none;" onclick="downloadTemplate()">下載部落格模板</button>
        </div>
        <div class="modal-footer">
            <button class="btn-close" onclick="closeModal('setModal')">關閉視窗</button>
        </div>
    </div>

    <div id="catModal" class="modal">
        <div class="modal-content">
            <h2>資產類別</h2>
            <p>快速跳轉至：Editorial / Social / Utility</p>
        </div>
        <div class="modal-footer">
            <button class="btn-close" onclick="closeModal('catModal')">關閉視窗</button>
        </div>
    </div>

    <div id="qaModal" class="modal">
        <div class="modal-content">
            <h2>常見問題</h2>
            <p>Q: 如何使用圖示？<br>A: 點擊首頁卡片即可自動複製 SVG 代碼。</p>
        </div>
        <div class="modal-footer">
            <button class="btn-close" onclick="closeModal('qaModal')">關閉視窗</button>
        </div>
    </div>

    <script>
        // 切換主題
        function toggleTheme() {
            const isDark = document.getElementById('themeToggle').checked;
            document.documentElement.setAttribute('data-theme', isDark ? 'dark' : 'light');
        }

        // 彈窗控制
        function openModal(id) { document.getElementById(id).classList.add('active'); }
        function closeModal(id) { document.getElementById(id).classList.remove('active'); }

        // 初始化資產
        async function init() {
            const res = await fetch('./assets.json');
            const data = await res.json();
            const factory = document.getElementById('factory');

            Object.keys(data.library).forEach(cat => {
                const title = document.createElement('div');
                title.className = 'category-title';
                title.innerText = cat;
                factory.appendChild(title);

                const grid = document.createElement('div');
                grid.className = 'grid';
                Object.keys(data.library[cat]).forEach(name => {
                    const svg = data.library[cat][name];
                    const card = document.createElement('div');
                    card.className = 'card';
                    card.innerHTML = `${svg}<div class="label">${name}</div>`;
                    card.onclick = () => {
                        navigator.clipboard.writeText(svg);
                        const label = card.querySelector('.label');
                        label.innerText = 'COPIED!';
                        setTimeout(() => label.innerText = name, 1000);
                    };
                    grid.appendChild(card);
                });
                factory.appendChild(grid);
            });
        }

        function downloadTemplate() {
            const content = `<html><body style="background:#000;color:#fff;text-align:center;padding:100px;"><h1>x-easy Generated</h1></body></html>`;
            const blob = new Blob([content], {type: 'text/html'});
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = 'x-easy-project.html';
            a.click();
        }

        init();
    </script>
</body>
</html>